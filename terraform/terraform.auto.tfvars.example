# MusicVibe CI/CD Platform - Terraform Configuration
# Copy this file to terraform.auto.tfvars and fill in your values

# ============================================================================
# AWS Configuration
# ============================================================================

aws_config = {
  region = "us-east-1"  # Change to your preferred AWS region
}

# ============================================================================
# AMI Configuration (Ubuntu 24.04 LTS)
# ============================================================================

ami_config = {
  id = "ami-0c02fb55956c7d316"  # Ubuntu 24.04 LTS us-east-1 (change for other regions)
}

# ============================================================================
# SSH Configuration
# ============================================================================

ssh_config = {
  key_name     = "musicvibe-pipeline-key"           # Your EC2 key pair name
  allowed_cidr = ["YOUR_PUBLIC_IP/32"]              # Your public IP (get with: curl ifconfig.me)
}

# ============================================================================
# EC2 Instance Types
# ============================================================================

instance_types = {
  master     = "t3.medium"    # Jenkins + K8s Master
  worker     = "t3.medium"    # K8s Worker nodes  
  monitoring = "t3.medium"    # Prometheus + Grafana
}

# ============================================================================
# Project Configuration
# ============================================================================

project_config = {
  name        = "musicvibe"
  environment = "production"
}

# ============================================================================
# Feature Flags - Toggle Optional Components
# ============================================================================

feature_flags = {
  enable_monitoring_instance = true   # Prometheus + Grafana (~$40/month)
  enable_tools_instance      = true   # Nexus + SonarQube (~$40/month)
  enable_worker_2            = true   # Second K8s worker (~$40/month)
}

# ============================================================================
# IAM Configuration
# ============================================================================

iam_config = {
  enable_instance_profiles = true     # Enable IAM roles for EC2 instances
}

# ============================================================================
# OIDC Configuration (for GitHub Actions - Optional)
# ============================================================================

oidc_config = {
  enable_github_oidc = false          # Set true to enable GitHub OIDC
  github_org        = "your-org"      # Your GitHub organization
  github_repo       = "your-repo"     # Your GitHub repository
}

# ============================================================================
# EXAMPLE COMPLETED CONFIGURATION
# ============================================================================
# 
# aws_config = {
#   region = "us-east-1"
# }
# 
# ami_config = {
#   id = "ami-0c02fb55956c7d316"  # Ubuntu 24.04 LTS us-east-1
# }
# 
# ssh_config = {
#   key_name     = "my-musicvibe-key"
#   allowed_cidr = ["203.0.113.45/32"]
# }
# 
# instance_types = {
#   master     = "t3.medium"
#   worker     = "t3.medium"
#   monitoring = "t3.medium"
# }
# 
# project_config = {
#   name        = "musicvibe"
#   environment = "production"
# }
# 
# feature_flags = {
#   enable_monitoring_instance = true
#   enable_tools_instance      = true
#   enable_worker_2            = true
# }
# 
# iam_config = {
#   enable_instance_profiles = true
# }
# 
# oidc_config = {
#   enable_github_oidc = false
#   github_org        = ""
#   github_repo       = ""
# }

# ============================================================================
# IMPORTANT NOTES
# ============================================================================
#
# 1. REPLACE "YOUR_PUBLIC_IP" with your actual IP: curl ifconfig.me
# 2. CREATE an EC2 key pair in AWS Console first
# 3. For other AWS regions, update ami_config.id with appropriate AMI
# 4. Total cost with all features: ~$200/month (5 instances)
# 5. Minimum cost (3 instances): ~$120/month
#
# AMI IDs for other regions (Ubuntu 24.04 LTS):
# us-west-2: ami-0aff18ec83b712f05
# eu-west-1: ami-0c7217cdde317cfec
# ap-southeast-1: ami-0497a974f8d5dcef8
#
# To save money, set feature flags to false:
# enable_monitoring_instance = false  # Saves ~$40/month
# enable_tools_instance      = false  # Saves ~$40/month  
# enable_worker_2            = false  # Saves ~$40/month
